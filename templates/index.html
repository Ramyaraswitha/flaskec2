{% extends 'base.html' %}
{% block body %}
<nav class="navbar bg-body-tertiary">
    <div class="container" >
      <a class="navbar-brand" href="#">
        <img src="static/flask.png"  width="40" height="40">
      </a>
      <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#add">Add Book</button>
    </div>
</nav>


<div class="container mt-4">
{% with messages= get_flashed_messages(with_categories=true) %}
{% if messages %}
{% for category, message in messages %}

<div class="alert alert-{{category}} alert-dismissable fade show" role="alert">
   {{message}}
  <button type="button" class="close" data-dismiss="alert" aria-label="close">
     <span aria-hidden="true">&times;</span>
  </button>
</div>

{% endfor %}
{% endif %}
{% endwith %}
    <div class="row">
        <table class="table table-striped " border="1">
            <thead>
                <tr class="table-info">
                  <th scope="col">ID</th>
                  <th scope="col">Title</th>
                  <th scope="col">Author</th>
                  <th scope="col">Price</th>
                  <th scope="col">Action</th>
                </tr>
              </thead>
              <tbody>
                {% for row in data %}
                <tr>
                  <th scope="row">{{row.0}}</th>
                  <td>{{row.1}}</td>
                  <td>{{row.2}}</td>
                  <td>{{row.3}}</td>
                  <td><a href="/update/{{row.0}}" class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#edit{{row.0}}">Edit</a>
                      <a href="/delete/{{row.0}}" class="btn btn-danger" onclick="return confirm('Are you sure to delete ?')">Delete</a>
                  </td>

                </tr>
                <div id="edit{{row.0}}" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                       <div class="modal-content">
                          <div class="modal-header">
                             <h4 class="modal-title">Update Book</h4>
                          </div>
                          <div class="modal-body">
                 
                             <form action="{{url_for('update')}}" method="POST">
                 
                 
                                <div class="form-group">
                 
                                   <label>Title:</label>
                                    <input type="hidden"  name="id" value="{{row.0}}">
                                   <input type="text" class="form-control" name="title" value="{{row.1}}" >
                 
                                </div>
                 
                 
                 
                                 <div class="form-group">
                                   <label>Author:</label>
                                   <input type="text" class="form-control" name="author" value="{{row.2}}">
                                </div>
                 
                                  <div class="form-group">
                                   <label>Price:</label>
                                   <input type="number" class="form-control" name="price" value="{{row.3}}">
                                </div>
                 
                                <div class="form-group">
                                   <button class="btn btn-primary mt-4" type="submit">Update Book</button>
                                </div>
                 
                 
                             </form>
                 
                 
                          </div>
                 
                 
                          <div class="modal-footer">
                             <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                 
                          </div>
                 
                 
                       </div>
                 
                 
                    </div>
                 
                 
                 </div>
                 
                {% endfor %}
        </table>
    </div>
</div>
<!-- Modal  for inserting the book -->

<div id="add" class="modal fade" role="dialog">
    <div class="modal-dialog">
       <div class="modal-content">
          <div class="modal-header">
             <h4 class="modal-title">Add Book</h4>
          </div>
          <div class="modal-body">
 
             <form action="{{url_for('add')}}" method="POST">
 
 
                <div class="form-group">
                   <label>Title:</label>
                   <input type="text" class="form-control" name="title" required="1">
                </div>
 
 
                 <div class="form-group">
                   <label>Author:</label>
                   <input type="text" class="form-control" name="author" required="1">
                </div>
 
                  <div class="form-group">
                   <label>Price:</label>
                   <input type="number" class="form-control" name="price" required="1">
                </div>
 
                <div class="form-group">
                   <button class="btn btn-primary mt-4" type="submit">Add Book</button>
                </div>
 
 
             </form>
 
 
          </div>
 
 
          <div class="modal-footer">
             <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
 
          </div>
 
       </div>
    </div>
 
 </div>
 
{% endblock %}